<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web OSI Intelligence Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link href="/static/css/style.css" rel="stylesheet">
</head>

<body class="min-h-screen p-4 md:p-8">

    <div class="max-w-[1600px] mx-auto space-y-6">
        <!-- Dashboard Toolbar -->
        <header class="flex justify-between items-center mb-8 glass p-4 rounded-xl">
            <div>
                <h1
                    class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-cyan-400 to-emerald-400 tracking-tight">
                    WEB OSI INTELLIGENCE
                </h1>
                <div class="flex gap-4 text-[10px] text-slate-400 font-mono mt-1">
                    <span>SYSTEM: <span class="text-emerald-400">ONLINE</span></span>
                    <span>THREAT LEVEL: <span class="text-blue-400">LOW</span></span>
                </div>
            </div>

            <div class="flex gap-4">
                <button onclick="window.triggerAttack()"
                    class="px-4 py-2 border border-red-500/50 text-red-400 rounded hover:bg-red-500/10 font-mono text-xs font-bold transition-all hover:scale-105">
                    âš  SIMULATE ATTACK
                </button>
                <button onclick="window.toggleHolo()"
                    class="px-4 py-2 border border-cyan-500/50 text-cyan-400 rounded hover:bg-cyan-500/10 font-mono text-xs font-bold transition-all hover:scale-105">
                    ðŸ§Š HOLO VIEW
                </button>
            </div>
        </header>

        <div class="grid grid-cols-12 gap-6">
            <!-- Left Col: Encapsulation Stack (Showcase Feature) -->
            <div class="col-span-12 lg:col-span-3">
                <div class="glass rounded-xl p-6 h-full flex flex-col">
                    <h3
                        class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-4 border-b border-white/5 pb-2">
                        Encapsulation Engine</h3>
                    <div id="stack-container" class="stack-container flex-1">
                        <!-- Stack Boxes Appended Here -->
                    </div>
                    <button onclick="window.playStack()"
                        class="mt-4 w-full bg-blue-600 hover:bg-blue-500 text-white py-2 rounded font-mono text-xs font-bold">
                        â–¶ PLAY ANIMATION
                    </button>
                </div>
            </div>

            <!-- Middle Col: Layer Cards (Code Flip) -->
            <div class="col-span-12 lg:col-span-5 space-y-4">
                <!-- Layers 7-1 -->
                <div class="layer-card glass rounded-lg p-0" data-osi="7">
                    <div class="bg-purple-500/10 p-4 border-b border-white/5 flex justify-between items-center">
                        <h2 class="font-bold text-purple-400">L7 APPLICATION</h2>
                        <span class="text-[10px] font-mono text-purple-300/50">HTTP / DNS</span>
                    </div>
                    <div id="l7-content" class="p-4 text-xs text-slate-300">Waiting for data...</div>
                </div>

                <div class="layer-card glass rounded-lg p-0" data-osi="6">
                    <div class="bg-indigo-500/10 p-4 border-b border-white/5 flex justify-between items-center">
                        <h2 class="font-bold text-indigo-400">L6 PRESENTATION</h2>
                        <span class="text-[10px] font-mono text-indigo-300/50">TLS / ENCRYPTION</span>
                    </div>
                    <div id="l6-content" class="p-4 text-xs text-slate-300">Waiting for data...</div>
                </div>

                <div class="layer-card glass rounded-lg p-0" data-osi="5">
                    <div class="bg-blue-500/10 p-4 border-b border-white/5 flex justify-between items-center">
                        <h2 class="font-bold text-blue-400">L5 SESSION</h2>
                        <span class="text-[10px] font-mono text-blue-300/50">COOKIES / SOCKETS</span>
                    </div>
                    <div id="l5-content" class="p-4 text-xs text-slate-300">Waiting for data...</div>
                </div>

                <div class="layer-card glass rounded-lg p-0" data-osi="4">
                    <div class="bg-cyan-500/10 p-4 border-b border-white/5 flex justify-between items-center">
                        <h2 class="font-bold text-cyan-400">L4 TRANSPORT</h2>
                        <span class="text-[10px] font-mono text-cyan-300/50">TCP / UDP</span>
                    </div>
                    <div id="l4-content" class="p-4 text-xs text-slate-300">Waiting for data...</div>
                </div>

                <div class="layer-card glass rounded-lg p-0" data-osi="3">
                    <div class="bg-emerald-500/10 p-4 border-b border-white/5 flex justify-between items-center">
                        <h2 class="font-bold text-emerald-400">L3 NETWORK</h2>
                        <span class="text-[10px] font-mono text-emerald-300/50">IP / ROUTING</span>
                    </div>
                    <div id="l3-content" class="p-4 text-xs text-slate-300">Waiting for data...</div>
                </div>

                <!-- Compact Lower Layers -->
                <div class="grid grid-cols-2 gap-4">
                    <div class="layer-card glass rounded-lg p-0" data-osi="12">
                        <div class="bg-orange-500/10 p-3 border-b border-white/5">
                            <h2 class="font-bold text-orange-400 text-xs">L2 DATA LINK</h2>
                        </div>
                        <div id="l12-content" class="p-3 text-[10px] text-slate-300">MAC / SWITCH</div>
                    </div>
                    <div
                        class="glass rounded-lg p-3 flex flex-col justify-center items-center text-slate-500 border border-white/5">
                        <span class="text-xs">L1 PHYSICAL</span>
                        <div class="w-full h-1 bg-gradient-to-r from-transparent via-slate-600 to-transparent mt-2">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Col: 3D Viz & Scanner -->
            <div class="col-span-12 lg:col-span-4 flex flex-col gap-6">
                <!-- Input -->
                <div class="glass p-2 rounded-xl flex gap-2">
                    <input type="text" id="targetUrl" placeholder="TARGET URL"
                        class="flex-1 bg-black/50 border border-slate-700/50 rounded px-4 py-2 font-mono text-xs text-white placeholder-slate-600 focus:border-blue-500 outline-none">
                    <button onclick="startAnalysis()"
                        class="bg-blue-600 hover:bg-blue-500 text-white px-6 rounded font-bold text-xs">SCAN</button>
                </div>

                <!-- 3D Container -->
                <div class="glass rounded-xl h-64 relative overflow-hidden" id="viz-container"></div>

                <!-- Terminal -->
                <div class="glass rounded-xl flex-1 flex flex-col min-h-[200px]">
                    <div class="bg-black/40 px-4 py-2 border-b border-white/5 flex items-center justify-between">
                        <span class="text-[10px] font-mono text-slate-500">> SYSTEM_LOG</span>
                        <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
                    </div>
                    <div id="terminal-log"
                        class="p-4 font-mono text-[10px] text-emerald-500/80 overflow-y-auto flex-1 terminal-scroll space-y-1 h-32">
                        <div>> Initializing Neural Interface...</div>
                    </div>
                    <!-- Chart moved inside terminal for "Hacker" feel -->
                    <div class="h-20 border-t border-white/5 bg-black/20 p-2">
                        <canvas id="latencyChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script type="module" src="/static/js/main.js"></script>
</body>

</html>